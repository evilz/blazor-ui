@page "/login"
@rendermode InteractiveServer
@inject NavigationManager Navigation

<PageTitle>Login - Blazor UI</PageTitle>

<div class="login-container">
    <Card Width="420px">
        <CardHeader>
            <div class="login-header">
                <Avatar Name="A" />
                <h3 class="mt05">Welcome back</h3>
                <small class="muted-color">Sign in to your account to continue</small>
            </div>
        </CardHeader>
        <CardContent>
            <div class="login-form">
                <Input TItem="string" Label="Email" Type="email" Placeholder="name@example.com" @bind-Value="email" />
                <Group>
                    <a class="forgot-password" href="#">Forgot password?</a>
                    <Input TItem="string" Label="Password" Type="password" Placeholder="••••••••••" @bind-Value="password" />
                </Group>
                @if (!string.IsNullOrEmpty(errorMessage))
                {
                    <div class="error-message">@errorMessage</div>
                }
                <Button Text="Sign in" Class="sign-in-button" OnClick="HandleLogin" />
                <div class="continue-with">
                    <span class="muted-color">OR CONTINUE WITH</span>
                </div>
                <div class="sign-in-others">
                    <Button Type="ButtonType.Outline" Class="sign-in-button" Width="100%" OnClick="HandleGitHubLogin">
                        <Icon Name="github" Type="IconType.Lucide" Size="16px" /> GitHub
                    </Button>
                    <Button Type="ButtonType.Outline" Class="sign-in-button" Width="100%" OnClick="HandleGoogleLogin">
                        <Icon Name="mail" Type="IconType.Lucide" Size="16px" /> Google
                    </Button>
                </div>
            </div>
        </CardContent>
        <CardFooter>
            <div class="login-footer">
                <small class="ta-center muted-color">Don't have an account? <a href="#">Sign up</a></small>
                <small class="ta-center muted-color">By signing in, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></small>
            </div>
        </CardFooter>
    </Card>
</div>

@code {
    private string email = "";
    private string password = "";
    private string errorMessage = "";

    private void HandleLogin()
    {
        errorMessage = "";
        
        if (string.IsNullOrWhiteSpace(email) || string.IsNullOrWhiteSpace(password))
        {
            errorMessage = "Please enter both email and password.";
            return;
        }

        // Check for guest credentials
        if (email.ToLower() == "guest@example.com" || email.ToLower() == "guest")
        {
            if (password == "guest")
            {
                // Successful login
                Navigation.NavigateTo("/");
            }
            else
            {
                errorMessage = "Invalid password. Use 'guest' for testing.";
            }
        }
        else
        {
            errorMessage = "Invalid credentials. Try 'guest' / 'guest' for demo.";
        }
    }

    private void HandleGitHubLogin()
    {
        errorMessage = "GitHub login is not implemented yet.";
    }

    private void HandleGoogleLogin()
    {
        errorMessage = "Google login is not implemented yet.";
    }
}

<style>
    .login-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 70vh;
        padding: 2rem;
    }

    .login-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        text-align: center;
    }

    .login-header h3 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 600;
    }

    .mt05 {
        margin-top: 0.5rem;
    }

    .muted-color {
        color: #64748b;
    }

    .login-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .forgot-password {
        display: block;
        text-align: right;
        font-size: 0.875rem;
        color: #6366f1;
        text-decoration: none;
        margin-bottom: 0.5rem;
    }

    .forgot-password:hover {
        text-decoration: underline;
    }

    .sign-in-button {
        width: 100%;
    }

    .continue-with {
        display: flex;
        align-items: center;
        text-align: center;
        margin: 0.5rem 0;
    }

    .continue-with::before,
    .continue-with::after {
        content: '';
        flex: 1;
        border-bottom: 1px solid #e2e8f0;
    }

    .continue-with span {
        padding: 0 1rem;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .sign-in-others {
        display: flex;
        gap: 0.5rem;
    }

    .login-footer {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }

    .login-footer a {
        color: #6366f1;
        text-decoration: none;
    }

    .login-footer a:hover {
        text-decoration: underline;
    }

    .ta-center {
        text-align: center;
    }

    .error-message {
        padding: 0.75rem;
        background-color: #fee;
        border: 1px solid #fcc;
        border-radius: 0.375rem;
        color: #c00;
        font-size: 0.875rem;
        text-align: center;
    }
</style>
