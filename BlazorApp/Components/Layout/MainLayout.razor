@inherits LayoutComponentBase
@inject NavigationManager Navigation

<div class="dashboard-layout">
    @* Note: OnMenuClick parameter is not functional in Sysinfocus.AspNetCore.Components v0.0.3.4 *@
    @* Navigation is handled via direct URL navigation by the Sidebar component *@
    <Sidebar Items="@sideBarItems" Show="@showMenu" IsSimpleSideBar="@isSimple" Height="100%"
             HoverBackground="purple" HoverForeground="white" Width="280px">
        <SidebarHeader>
            <h4 class="large g8 flex jcc mt1 mb05 pointer" @onclick="GotoHome">
                <Icon Name="home" Size="32px" />
                Blazor UI
            </h4>
        </SidebarHeader>
        <SidebarFooter>
            <small class="muted-color flex jcc mt05 mb05" style="font-size:0.7rem">&copy; 2025, Blazor UI Template.</small>
        </SidebarFooter>
    </Sidebar>

    <div class="main-content">
        <header class="top-bar">
            <div class="top-bar-left">
                <button class="menu-toggle" @onclick="ToggleSidebar">
                    ☰
                </button>
                <h1 class="page-title">Dashboard</h1>
            </div>
            <div class="top-bar-right">
                <input type="search" placeholder="Search..." class="search-input" />
                <div class="user-info">
                    <span>Admin</span>
                </div>
            </div>
        </header>

        <main class="content">
            @Body
        </main>
    </div>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

@code {
    private bool showMenu = true;
    private bool isSimple = false;
    private List<SideBarItem> sideBarItems = new();

    protected override void OnInitialized()
    {        
        sideBarItems = new List<SideBarItem>
        {
            new SideBarItem("Main", 1, 0, "Main", null) { IsExpanded = true },
            new SideBarItem("Main", 2, 1, "Dashboard", "home") { Url = "/" },
            new SideBarItem("Main", 3, 1, "Analytics", "bar_chart") { Url = "/analytics" },
            new SideBarItem("Main", 4, 1, "Orders", "shopping_cart") { Url = "/orders" },
            new SideBarItem("Main", 5, 1, "Products", "inventory_2") { Url = "/products" },
            new SideBarItem("Main", 6, 1, "Customers", "group") { Url = "/customers" },
            
            new SideBarItem("Examples", 7, 0, "Examples", null) { IsExpanded = true },
            new SideBarItem("Examples", 8, 7, "Counter", "add_circle") { Url = "/counter" },
            new SideBarItem("Examples", 9, 7, "Weather", "wb_sunny") { Url = "/weather" },
            new SideBarItem("Examples", 10, 7, "Sidebar Demo", "menu_open") { Url = "/sidebar-demo" },
            
            new SideBarItem("Settings", 11, 0, "Settings", null) { IsExpanded = true },
            new SideBarItem("Settings", 12, 11, "Settings", "settings") { Url = "/settings" }
        };
    }

    private void ToggleSidebar()
    {
        showMenu = !showMenu;
    }

    private void GotoHome()
    {
        Navigation.NavigateTo("/");
    }
}
